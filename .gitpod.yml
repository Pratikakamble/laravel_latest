image:
  file: .gitpod.Dockerfile

tasks:
  - name: Install dependencies
    init: |
      composer install
      cp .env.example .env
      php artisan key:generate
  - name: Run Laravel server and MySQL
    command: |
      sudo service mysql start
      php artisan migrate --force
      php artisan serve --host=0.0.0.0 --port=8000

ports:
  - port: 8000
    onOpen: open-preview
    visibility: public

  - port: 3306
    onOpen: ignore
    visibility: private
